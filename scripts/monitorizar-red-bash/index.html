<!doctype html><html lang=en-us>
<head><meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>Monitorizar Red Bash - My Documentation</title>
<meta name=description content>
<meta name=generator content="Hugo 0.91.2">
<link href=https://wiki.cyd4r.com/index.xml rel=alternate type=application/rss+xml>
<link rel=canonical href=https://wiki.cyd4r.com/scripts/monitorizar-red-bash/>
<link rel=stylesheet href=https://wiki.cyd4r.com/css/theme.min.css>
<script src=https://use.fontawesome.com/releases/v5.0.6/js/all.js></script>
<link rel=stylesheet href=https://wiki.cyd4r.com/css/chroma.min.css>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/jquery.easing@1.4.1/jquery.easing.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js></script>
<script src=https://wiki.cyd4r.com/js/bundle.js></script><style>:root{--custom-font-color:#00ff00;--custom-background-color:black}</style>
<meta property="og:title" content="Monitorizar Red Bash">
<meta property="og:description" content="#!/bin/bash LOG=/tmp/mylog.log SECONDS=3600 EMAIL=mi@email for i in $@ ;do echo &#34;$i-UP!&#34; > $LOG.$i done while true; do for i in $@; do ping -c 1 $i > /dev/null if [ $? -ne 0 ]; then STATUS=$(cat $LOG.$i) if [ $STATUS != &#34;$i-DOWN!&#34; ]; then echo &#34;`date`: ping failed, $ihost is down!&#34; | mail -s &#34;$ihost is down!&#34; $EMAIL fi else STATUS=$(cat $LOG.$i) if [ $STATUS != &#34;$i-UP!&#34; ]; then echo &#34;`date`: ping OK, $ihost is up!">
<meta property="og:type" content="article">
<meta property="og:url" content="https://wiki.cyd4r.com/scripts/monitorizar-red-bash/"><meta property="og:image" content="https://wiki.cyd4r.com/images/og-image.png"><meta property="article:section" content="scripts">
<meta property="article:published_time" content="2021-12-08T19:21:31+01:00">
<meta property="article:modified_time" content="2021-12-08T19:21:31+01:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="https://wiki.cyd4r.com/images/og-image.png">
<meta name=twitter:title content="Monitorizar Red Bash">
<meta name=twitter:description content="#!/bin/bash LOG=/tmp/mylog.log SECONDS=3600 EMAIL=mi@email for i in $@ ;do echo &#34;$i-UP!&#34; > $LOG.$i done while true; do for i in $@; do ping -c 1 $i > /dev/null if [ $? -ne 0 ]; then STATUS=$(cat $LOG.$i) if [ $STATUS != &#34;$i-DOWN!&#34; ]; then echo &#34;`date`: ping failed, $ihost is down!&#34; | mail -s &#34;$ihost is down!&#34; $EMAIL fi else STATUS=$(cat $LOG.$i) if [ $STATUS != &#34;$i-UP!&#34; ]; then echo &#34;`date`: ping OK, $ihost is up!">
<meta itemprop=name content="Monitorizar Red Bash">
<meta itemprop=description content="#!/bin/bash LOG=/tmp/mylog.log SECONDS=3600 EMAIL=mi@email for i in $@ ;do echo &#34;$i-UP!&#34; > $LOG.$i done while true; do for i in $@; do ping -c 1 $i > /dev/null if [ $? -ne 0 ]; then STATUS=$(cat $LOG.$i) if [ $STATUS != &#34;$i-DOWN!&#34; ]; then echo &#34;`date`: ping failed, $ihost is down!&#34; | mail -s &#34;$ihost is down!&#34; $EMAIL fi else STATUS=$(cat $LOG.$i) if [ $STATUS != &#34;$i-UP!&#34; ]; then echo &#34;`date`: ping OK, $ihost is up!"><meta itemprop=datePublished content="2021-12-08T19:21:31+01:00">
<meta itemprop=dateModified content="2021-12-08T19:21:31+01:00">
<meta itemprop=wordCount content="93"><meta itemprop=image content="https://wiki.cyd4r.com/images/og-image.png">
<meta itemprop=keywords content></head>
<body><div class=container><header>
<h1>My Documentation</h1>
</header>
<div class=content-container>
<main><h1>Monitorizar Red Bash</h1>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e>#!/bin/bash
</span><span style=color:#75715e></span>LOG<span style=color:#f92672>=</span>/tmp/mylog.log SECONDS<span style=color:#f92672>=</span><span style=color:#ae81ff>3600</span>
EMAIL<span style=color:#f92672>=</span>mi@email 
<span style=color:#66d9ef>for</span> i in $@ ;<span style=color:#66d9ef>do</span>
echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>-UP!&#34;</span> &gt; $LOG.$i 
<span style=color:#66d9ef>done</span>
<span style=color:#66d9ef>while</span> true; <span style=color:#66d9ef>do</span> 
    <span style=color:#66d9ef>for</span> i in $@; <span style=color:#66d9ef>do</span>
    ping -c <span style=color:#ae81ff>1</span> $i &gt; /dev/null 
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $? -ne <span style=color:#ae81ff>0</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
        STATUS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat $LOG.$i<span style=color:#66d9ef>)</span>
<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $STATUS !<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>-DOWN!&#34;</span> <span style=color:#f92672>]</span>;
<span style=color:#66d9ef>then</span>
     echo <span style=color:#e6db74>&#34;`date`: ping failed, </span>$i<span style=color:#e6db74>
</span><span style=color:#e6db74>host is down!&#34;</span> |
mail -s <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74> host is down!&#34;</span> $EMAIL
<span style=color:#66d9ef>fi</span>
<span style=color:#66d9ef>else</span>
STATUS<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat $LOG.$i<span style=color:#66d9ef>)</span>
<span style=color:#66d9ef>if</span> <span style=color:#f92672>[</span> $STATUS !<span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>-UP!&#34;</span> <span style=color:#f92672>]</span>; <span style=color:#66d9ef>then</span>
     echo <span style=color:#e6db74>&#34;`date`: ping OK, </span>$i<span style=color:#e6db74> host
</span><span style=color:#e6db74>is up!&#34;</span> |
mail -s <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74> host is up!&#34;</span> $EMAIL
<span style=color:#66d9ef>fi</span>
echo <span style=color:#e6db74>&#34;</span>$i<span style=color:#e6db74>-UP!&#34;</span> &gt; $LOG.$i
<span style=color:#66d9ef>fi</span> <span style=color:#66d9ef>done</span>
sleep $SECONDS <span style=color:#66d9ef>done</span>
</code></pre></div><div class=edit-meta>
Last updated on 8 Dec 2021
<br>
Published on 8 Dec 2021
<br></div><nav class=pagination><a class="nav nav-prev" href=https://wiki.cyd4r.com/scripts/better_bash_scripting/ title="Better Bash Scripting"><i class="fas fa-arrow-left" aria-hidden=true></i>&nbsp;Prev - Better Bash Scripting</a>
<a class="nav nav-next" href=https://wiki.cyd4r.com/ssh/ title=SshSshes>Next - SshSshes <i class="fas fa-arrow-right" aria-hidden=true></i></a>
</nav><footer><p class=powered>Powered by <a href=https://gohugo.io>Hugo</a>. Theme by <a href=https://themes.gohugo.io/hugo-theme-techdoc/>TechDoc</a>. Designed by <a href=https://github.com/thingsym/hugo-theme-techdoc>Thingsym</a>.</p>
</footer>
</main>
<div class=sidebar>
<nav class=slide-menu>
<ul>
<li><a href=https://wiki.cyd4r.com>Home</a></li>
<li class=has-sub-menu><a href=https://wiki.cyd4r.com/vpn/>VPNs<span class="mark closed">+</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/vpn/openvpn/>Openvpn</a></li>
<li><a href=https://wiki.cyd4r.com/vpn/wireguard/>Wireguard</a></li>
</ul>
</li>
<li class=has-sub-menu><a href=https://wiki.cyd4r.com/comandos/>Comandos<span class="mark closed">+</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/comandos/scp/>Scp</a></li>
<li><a href=https://wiki.cyd4r.com/comandos/openssl/>OpenSSL</a></li>
<li><a href=https://wiki.cyd4r.com/comandos/sed/>Uso del comando sed con ejemplos</a></li>
</ul>
</li>
<li class="parent has-sub-menu"><a href=https://wiki.cyd4r.com/scripts/>Scripts<span class="mark opened">-</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/scripts/better_bash_scripting/>Better Bash Scripting</a></li>
<li class=active><a href=https://wiki.cyd4r.com/scripts/monitorizar-red-bash/>Monitorizar Red Bash</a></li>
</ul>
</li>
<li class=has-sub-menu><a href=https://wiki.cyd4r.com/ssh/>SshSshes<span class="mark closed">+</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/ssh/ssh-agent-macos/>Ssh Agent Macos</a></li>
</ul>
</li>
<li class=has-sub-menu><a href=https://wiki.cyd4r.com/docker/>Dockers<span class="mark closed">+</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/docker/basics-docker/>Basics Docker</a></li>
<li><a href=https://wiki.cyd4r.com/docker/tips/>Tips para Docker</a></li>
</ul>
</li>
<li class=has-sub-menu><a href=https://wiki.cyd4r.com/git/>Gits<span class="mark closed">+</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/git/comandos/>Comandos</a></li>
</ul>
</li>
<li class=has-sub-menu><a href=https://wiki.cyd4r.com/dns/>Dns<span class="mark closed">+</span></a>
<ul class=sub-menu>
<li><a href=https://wiki.cyd4r.com/dns/tiposdns/>Tipos de Registros</a></li>
</ul>
</li>
</ul>
</nav>
<div class=sidebar-footer></div>
</div>
</div><a href=# id=backtothetop-fixed class=backtothetop data-backtothetop-duration=600 data-backtothetop-easing=easeOutQuart data-backtothetop-fixed-fadein=1000 data-backtothetop-fixed-fadeout=1000 data-backtothetop-fixed-bottom=10 data-backtothetop-fixed-right=20>
<span class="fa-layers fa-fw">
<i class="fas fa-circle"></i>
<i class="fas fa-arrow-circle-up"></i>
</span></a>
</div>
</body>
</html>